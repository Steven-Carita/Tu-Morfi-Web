<!DOCTYPE html>

<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>Datos de compra</title>
  <style id="scrollfix">
    main {
      background-image: url(../img/fondo.jpg);
    }


    .resumen-compra {
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      height: calc(93.5vh - 140px);
      position: sticky;
      top: 16px;
      box-sizing: border-box;
    }

    .resumen-lista {
      flex: 1 1 auto;
      overflow-y: auto;
      margin-bottom: .75rem;
      padding-right: 4px;
      min-height: 0;
      padding-right: 18px;
    }

    #lista-resumen {
      list-style: none;
      margin: 0;
      padding: 0;
    }

    .resumen-totales {
      flex-shrink: 0;
      position: sticky;
      bottom: 0;
      background: #fff;
      padding-top: .5rem;
      border-top: 1px solid #eee;
      z-index: 2;
    }

    main.wrapper a,
    main.wrapper a:visited,
    main.wrapper a:hover,
    main.wrapper a:focus,
    main.wrapper a:active {
      text-decoration: none !important;
      color: #e6e6e6 !important;
      outline: none !important;
    }
  </style>
  <link rel="icon" href="../img/favicon.png" type="image/png">
  <link href="../css/pago/pago.css" rel="stylesheet" />
  <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
    integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css" rel="stylesheet" />
</head>

<body>
  <main class="wrapper">
    <a class="logo-web" href="../index.html">
      <h4 class="logo"><img alt="Logo Tu Morfi Web" class="logo-img1" src="../img/logo.png" /> Tu Morfi Web</h4>
    </a>
    <div class="fondo">
      <h2 class="titulo-principal">DATOS DE COMPRA</h2>
      <form id="form-datos-compra">
        <div class="compra-grid tres-columnas">
          <section class="datos contacto">
            <h3>Contacto</h3>
            <label>Nombre <input id="nombre" required="" /></label><br />
            <label>Apellido <input id="apellido" required="" /></label><br />
            <label>Teléfono <input id="telefono" required="" /></label><br />
            <label>Email <input id="email" required="" type="email" /></label>
          </section>
          <section class="datos entrega">
            <h3>Entrega</h3>
            <label>Tipo
              <select id="tipo-entrega" required="">
                <option value="" disabled="" selected="">Seleccioná el tipo</option>
                <option value="retiro">Retiro en el local</option>
                <option value="envio">Envío a domicilio</option>
              </select>
            </label>
            <div id="bloque-envio">
              <label>Dirección <input id="direccion" placeholder="Calle y número" /></label><br />
              <label>Piso/Depto <input id="piso" placeholder="Opcional" /></label><br />
              <label>Localidad
                <select id="localidad">
                  <option disabled="" selected="" value="">Seleccioná tu localidad</option>
                  <option value="mataderos">Mataderos</option>
                  <option value="parque avellaneda">Parque Avellaneda</option>
                  <option value="lugano">Lugano</option>
                </select>
              </label><br />
              <label>Código Postal <input id="cp" /></label><br />
              <label>Observaciones <textarea id="observaciones" rows="2"></textarea></label>
            </div>
          </section>
          <aside class="resumen-compra">
            <h3>Resumen del pedido</h3>
            <div class="resumen-lista">
              <ul id="lista-resumen"></ul>
            </div>
            <div class="resumen-totales">
              <div class="row"><span>Subtotal</span><span id="subtotal-resumen">$0</span></div>
              <div class="row envio-row">
                <span>Envío</span>
                <span>
                  <span id="envio-resumen">$0</span>
                  <span class="badge-free" hidden="" id="envio-badge">GRATIS</span>
                </span>
              </div>
              <div class="line"></div>
              <div class="row total"><span>Total</span><strong id="precio-total">$0</strong></div>
            </div>
            <p class="envio-msg" id="envio-msg"></p>
          </aside>
        </div>
        <p id="errores-form" class="mensaje-error" hidden=""></p>
        <div class="acciones-form">

          <a class="btn btn-secondary" href="carrito.html">Volver</a>
          <button type="submit" class="btn btn-primary" id="continuarBtn">Continuar</button>
        </div>
      </form>
    </div>
  </main>
  <footer>
    <div class="footer">
      <div class="footer__top">
        <div>
          <h2><img alt="Logo Tu Morfi Web" class="logo-img" src="../../img/logo.png" /> TU MORFI WEB</h2>
          <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Atque quam natus doloremque cum nobis!
            Omnis ex repudiandae excepturi debitis? Doloremque omnis dolores doloribus. Quas, possimus
            aspernatur.</p>
        </div>
        <div class="address">
          <p>
            <i class="bi bi-geo-alt-fill"></i> AV DIRECTORIO 1587, CABA, ARGENTINA<br />
            <i class="bi bi-envelope-fill"></i> INFO@TUMORFIWEB.COM
          </p>
        </div>
      </div>
      <div class="footer__bottom">
        <p>© <a class="fantasticos-footer" href="">FANTASTICOS</a> 2025. ALL RIGHTS RESERVED.</p>
        <div class="icons">
          <a href=""><i class="bi bi-instagram"></i></a>
          <a href=""><i class="bi bi-facebook"></i></a>
          <a href=""><i class="bi bi-twitter"></i></a>
          <a href=""><i class="bi bi-whatsapp"></i></a>
        </div>
      </div>
    </div>
  </footer>
  <script src="../js/datos-compra.js"></script>
  <script crossorigin="anonymous" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
    src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var btn = document.getElementById('continuarBtn');
      function parseARMoney(text) {
        if (!text) return null;
        var t = String(text).replace(/[^0-9.,-]/g, '');
        t = t.replace(/\./g, '').replace(',', '.');
        var v = parseFloat(t);
        return isNaN(v) ? null : v;
      }
      function getVal(id) {
        var el = document.getElementById(id);
        return el ? parseARMoney(el.textContent) : null;
      }
      if (btn) {
        btn.addEventListener('click', function () {
          var subtotal = getVal('subtotal-resumen');
          var envio = getVal('envio-resumen');
          var total = getVal('precio-total');
          if (subtotal != null) localStorage.setItem('pago_subtotal', subtotal);
          if (envio != null) localStorage.setItem('pago_envio', envio);
          if (total != null) localStorage.setItem('pago_total', total);
        });
      }
    });
  </script>
</body>

</html>